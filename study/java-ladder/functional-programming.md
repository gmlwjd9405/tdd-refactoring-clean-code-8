# 함수형 프로그래밍

## Functional Programming
### 왜 함수형 프로그래밍을 배워야 하는가?
- [왜 함수형 프로그래밍을 배워야 하는가?](http://preview.hanbit.co.kr/1967/sample_ebook.pdf) - 샘플 Chapter

#### 1. 동시성 이슈
- 스마트폰까지 멀티 CPU를 가지고 있는 상황에서 동시성 이슈를 해결하면서 안정적인 소프트웨어를 개발하는 것에 대한 중요성이 높아졌다.
- 데이터의 상태를 변경하는 객체 지향 프로그래밍 방식으로 **동시성 문제를 해결하는 데는 한계**가 있다.

#### 2. 데이터 관리에 따른 부담
- 대용량 데이터를 다루는 작업이 점점 더 많아지고 있다. 대용량 데이터를 처리할 때 데이터를 객체로 변환하는데 따른 부담이 크다.
- 대용량 데이터를 처리할 수 있는 효율적인 데이터 구조와 데이터 연산이 필요하다.

#### 3. 함수형 프로그래밍은 모듈화되어 있다.
- 객체 단위의 모듈화는 가장 작은 단위의 모듈화가 아니다. 함수형 프로그래밍의 함수를 모듈화할 경우, 수 많은 곳에 재사용할 수 있다.
- 함수형 프로그래밍은 더 유용하고, 재사용이 편리하고, 구성(compose)이 용이하고, 테스트하기 더 간편한 추상화를 제공한다.

#### 4. 더 빠르게 작업해야 한다.
- 소프트웨어 개발 흐름은 점점 더 빠른 결과물을 확인할 수 있기를 기대하는 방향으로 변화되고 있다.
- 객체에 대한 모델링에 많은 시간을 투자하기보다 사용자 요구사항에 대해서 최소한으로 충분한 수준을 유지하면서 동시에 변화에 대해서도 유연하게 대응하는데 도움을 준다.
  - 클래스가 없는 함수형 프로그래밍은 단순히 함수를 잘 쪼개서 엮기만 하면 된다.

#### 5. 함수형 프로그래밍은 단순함으로의 복귀다.
- 요구사항 자체가 본질적으로 가지고 있는 복잡성이 아니라 요구사항을 구현하기 위해 선택된 방식에 서의 복잡성을 단순화할 수 있을 것으로 기대한다.

#### 함수형 프로그래밍을 연습하면서 얻을 수 있는 장점
- 복잡한 문제를 작은 단위로 분리해 해결하는 능력이 프로그래머에게 특히 중요하다.
- 함수형 프로그래밍을 학습하면 문제에 접근하는 방법, 문제를 작은 단위로 쪼개는 방법, 설계하는 과정, 프로그래밍하는 순서에서 새로운 시각을 배울 수 있다.
- 즉, 함수형 프로그래밍 방식을 학습하면 현재 프로그래밍 스타일을 개선해 더 깔끔한 코드(clean code)를 구현하는데 도움을 받을 수 있다.
- input과 output이 무조건 있기 때문에 테스트하기 쉬운 코드를 만들 수 밖에 없다. (TDD에 유리)


## 명령형 프로그래밍 vs 선언형 프로그래밍
### 정의 및 특징
#### 명령형 프로그래밍(Imperative programming)
- 프로그래밍의 **상태와 상태를 변경**시키는 구문의 관점으로 접근하는 프로그래밍 방식
- 명령형 프로그래밍은 컴퓨터가 실행할 명령들을 실행 순서대로 구현해야 한다.
- 명령형 프로그래밍 언어로 Fortran, Algol, Pascal, C, ADA, C++, Java 등등이 있다.
- 대부분의 객체 지향 프로그래밍 언어가 명령형 프로그래밍 언어이다.
- 알고리즘 처리 작업에 적합한 언어이다.

#### 선언형 프로그래밍(Declarative programming)
- 선언으로만 프로그램을 동작시키는 것을 의미한다.
- 프로그램을 실행하기 위해 구체적인 작동 순서를 나열하지 않아도 된다.
- 선언형 프로그래밍 언어로 Haskell, SQL, HTML, XML 등등이 있다.
- 완전하지 않지만, Functional Programming을 활용해 일정 수준의 선언형 프로그래밍을 할 수 있다.
- Functional Programming은 선언형 프로그래밍의 한 종류로 볼 수 있다.

### 예시
#### 명령형 프로그래밍
```
나: "소피아, 장난감 정리하자. 땅에 어떤 장난감이 있지?"
소피아: "어. 공이 있네"
나: "그래. 공을 박스에 넣자. 땅에 또 뭐가 있지?"
소피아: "어. 인형이 있지"
나: "그래. 인형을 박스에 넣자. 땅에 또 뭐가 있지?"
소피아: "어. 책이 있네"
나: "그래. 책을 박스에 넣자. 땅에 또 뭐가 있지?"
소피아: "아니. 아무것도 없어"
나: "잘했네. 이제 다 했다"
```

- 명령형 프로그래밍(Imperative programming) 스타일
```java
public int getPoint(Customer customer) {
  for (int i = 0; i < customers.size(); i++) {
    Customer c = customers.get(i);
    if (customer.equals(c)) {
      return c.getPoint();
    }
  }
  return NO_DATA;
}
```

- 명령형 프로그래밍 – C#
```java
List<int> collection = new List<int> { 1, 2, 3, 4, 5 };
List<int> results = new List<int>();

foreach (var num in collection) {
  if (num % 2 != 0)
    results.Add(num);
}
```

#### 선언형 프로그래밍
```
"소피아. 땅에 있는 모든 장난감을 박스에 넣으렴"
```

- 선언형 프로그래밍(Declarative programming) 스타일
```java
public int getPoint(Customer customer) {
  if (isRegisteredCustomer(customer) ){
    return findCustomer(customer).getPoint();
  } else {
    return NO_DATA;
  }
}
```

- 선언형 프로그래밍 – C#
```java
List<int> collection = new List<int> { 1, 2, 3, 4, 5 };

var results = collection.Where( num => num % 2 != 0);
```

## 함수형 프로그래밍의 특징
#### 1. 변경 불가능한 값(immutable value)을 활용
- 값이 변경되는 것을 허용하면 멀티 스레드 프로그래밍이 힘들다.
- 값을 변경할 수 없는 경우 프로그램의 정확성을 높여 버그의 발생 가능성을 줄인다.

#### 2. 1등 시민으로서의 함수
- 함수형 프로그래밍에서는 함수가 1등 시민의 역할을 한다.
- 함수를 1등 시민으로 활용이 가능할 경우 함수를 함수의 인자로 받거나 함수의 반환 값으로 활용하는 것이 가능하다.

#### 3. 람다와 클로저
- 람다는 익명 함수의 다른 표현이다. 즉, 함수는 함수인데 이름이 없는 경우를 의미한다.

#### 4. 고계함수(higher-order functions)
- 고계함수란 다른 함수를 인수로 받아들이거나 함수를 리턴하는 함수이다. 
- 자바 메소드는 인수나 반환 값으로 primitive type과 객체만 사용할 수 있다. 함수형 프로그래밍은 함수가 1급 시민이 될 수 있기 때문에 고계함수가 가능하다.

#### 5. 부수효과(side effect)가 없는 함수
- 함수가 불변(immutable)인 특성을 가지기 때문에 함수를 사용하는 입장에서 특별한 부수효과가 발생 하지 않는다. 
- 따라서 멀티 스레드 환경에서 안정적인 프로그래밍을 구현할 수 있다.

#### 함수형 프로그래밍의 가장 핵심적인 특징은 side effect를 만들지 않는 것이다.
- Unfuntional Code
  ```java
  a = 0
  def increment1():
    global a
    a += 1
  ```
  - 리턴되는 값이 변경될 수 있다.

- Funtional Code
  ```java
  def increment2(a):

  return a + 1
  ```
  - input이 같으면 output이 항상 같아야 한다.


## 자바 개발자와 함수형 프로그래밍(FP)
### 자바 개발자가 FP를 연습하는 방법
- OOP 사고를 가지는 개발자가 OOP와 FP를 모두 지원하는 언어로 FP를 연습하는 것이 쉽지 않다.
- FP를 제대로 연습하고 싶다면 **극단적으로** FP를 지향하는 언어로 연습하는 것을 추천한다.
- 예를 들어, Lisp 계열인 scheme, JVM 언어인 clojure와 같은 언어가 좋은 대안이 될 수 있다.

### 자바 개발자로서 FP를 대하는 자세
- only OOP와 only FP 기반으로 프로그래밍하는데 한계가 있다.
- FP의 장점을 자바에 도입하는 것이 OOP를 더 잘할 수 있는 길이라 생각한다.

- > 프로그래밍의 기본 틀은 OOP 기반, 
  > 메소드 내부 구현은 FP를 지향, 
  > 객체의 상태 관리는 immutable object를 지향

- 객체지향 언어에 흥미가 떨어지거나 새로운 프로그래밍 접근 방식을 도전하고 싶거나 현재의 역량을 한 단계 더 성장시키고 싶다면...
  - => 함수형 프로그래밍에 도전해 보는 것을 추천한다.


---

### :triangular_ruler: [Ladder Home](https://github.com/gmlwjd9405/tdd-refactoring-clean-code-8/tree/master/study/java-ladder)
